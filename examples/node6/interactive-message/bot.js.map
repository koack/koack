{"version":3,"sources":["../../src/interactive-message/bot.js"],"names":["bot","on","MESSAGE","regexp","handler","ctx","reply","mention","attachments","text","fallback","callbackId","actions","name","type","value","replyEphemeral","replace"],"mappings":";;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;AAEA;;kBAEgBA,GAAD,IAAc;AAC3BA,MAAIC,EAAJ,CACE,gBAAWC,OADb,EAEE,6BAAc,CACZ;AACEC,YAAQ,oBADV;AAEE;AACAC,aAAUC,GAAD,IAAS;AAChBA,UAAIC,KAAJ,CAAW,SAAQD,IAAIE,OAAJ,EAAc,EAAjC;AACAF,UAAIC,KAAJ,CAAU,qBAAV,EAAiC;AAC/BE,qBAAa,CACX;AACEC,gBAAM,sCADR;AAEEC,oBAAU,0BAFZ;AAGEC,sBAAY,SAHd;AAIEC,mBAAS,CACP,EAAEC,MAAM,KAAR,EAAeJ,MAAM,KAArB,EAA4BK,MAAM,QAAlC,EAA4CC,OAAO,KAAnD,EADO,EAEP,EAAEF,MAAM,IAAR,EAAcJ,MAAM,IAApB,EAA0BK,MAAM,QAAhC,EAA0CC,OAAO,IAAjD,EAFO,EAGP,EAAEF,MAAM,KAAR,EAAeJ,MAAM,iBAArB,EAAwCK,MAAM,QAA9C,EAAwDC,OAAO,eAA/D,EAHO,EAIP,EAAEF,MAAM,IAAR,EAAcJ,MAAM,gBAApB,EAAsCK,MAAM,QAA5C,EAAsDC,OAAO,cAA7D,EAJO,EAKP,EAAEF,MAAM,KAAR,EAAeJ,MAAM,eAArB,EAAsCK,MAAM,QAA5C,EAAsDC,OAAO,aAA7D,EALO,EAMP,EAAEF,MAAM,IAAR,EAAcJ,MAAM,cAApB,EAAoCK,MAAM,QAA1C,EAAoDC,OAAO,YAA3D,EANO;AAJX,SADW;AADkB,OAAjC;AAiBD;AAtBH,GADY,CAAd,CAFF;;AA8BAf,MAAIC,EAAJ,sCAAsCI,GAAD,IAAS;AAC5C,QAAIA,IAAIO,OAAJ,CAAY,CAAZ,EAAeG,KAAf,KAAyB,KAA7B,EAAoC;AAClCV,UAAIC,KAAJ,CAAU,4BAAV;AACD,KAFD,MAEO,IAAID,IAAIO,OAAJ,CAAY,CAAZ,EAAeG,KAAf,KAAyB,IAA7B,EAAmC;AACxCV,UAAIC,KAAJ,CAAU,0BAAV;AACD,KAFM,MAEA,IAAID,IAAIO,OAAJ,CAAY,CAAZ,EAAeG,KAAf,KAAyB,eAA7B,EAA8C;AACnDV,UAAIW,cAAJ,CAAmB,4BAAnB;AACD,KAFM,MAEA,IAAIX,IAAIO,OAAJ,CAAY,CAAZ,EAAeG,KAAf,KAAyB,cAA7B,EAA6C;AAClDV,UAAIW,cAAJ,CAAmB,0BAAnB;AACD,KAFM,MAEA,IAAIX,IAAIO,OAAJ,CAAY,CAAZ,EAAeG,KAAf,KAAyB,aAA7B,EAA4C;AACjDV,UAAIC,KAAJ,CAAU,4BAAV,EAAwC,EAAEW,SAAS,IAAX,EAAxC;AACD,KAFM,MAEA,IAAIZ,IAAIO,OAAJ,CAAY,CAAZ,EAAeG,KAAf,KAAyB,YAA7B,EAA2C;AAChDV,UAAIC,KAAJ,CAAU,0BAAV,EAAsC,EAAEW,SAAS,IAAX,EAAtC;AACD,KAFM,MAEA;AACLZ,UAAIC,KAAJ,CAAU,QAAV;AACD;AACF,GAhBD;AAiBD,C","file":"bot.js","sourcesContent":["import 'nightingale-app-console/src';\nimport { INTERACTIVE_MESSAGE_RESPONSE } from 'koack/src/';\nimport { RTM_EVENTS } from 'koack/src/bot';\nimport messageRouter from 'koack/src/message-router';\nimport type { Bot } from 'koack/src/bot';\n// import { INTERACTIVE_MESSAGE_RESPONSE } from 'koack/src/interactive-message';\n\nexport default (bot: Bot) => {\n  bot.on(\n    RTM_EVENTS.MESSAGE,\n    messageRouter([\n      {\n        regexp: /\\b(hello|hi|hey)\\b/,\n        // stop: false,\n        handler: (ctx) => {\n          ctx.reply(`Hello ${ctx.mention()}`);\n          ctx.reply('Having a good day ?', {\n            attachments: [\n              {\n                text: 'Choose if you have a good day or not',\n                fallback: 'You are unable to choose',\n                callbackId: 'goodDay',\n                actions: [\n                  { name: 'yes', text: 'Yes', type: 'button', value: 'yes' },\n                  { name: 'no', text: 'No', type: 'button', value: 'no' },\n                  { name: 'yes', text: 'Yes (Ephemeral)', type: 'button', value: 'yes-ephemeral' },\n                  { name: 'no', text: 'No (Ephemeral)', type: 'button', value: 'no-ephemeral' },\n                  { name: 'yes', text: 'Yes (Replace)', type: 'button', value: 'yes-replace' },\n                  { name: 'no', text: 'No (Replace)', type: 'button', value: 'no-replace' },\n                ],\n              },\n            ],\n          });\n        },\n      },\n    ]),\n  );\n\n  bot.on(INTERACTIVE_MESSAGE_RESPONSE, (ctx) => {\n    if (ctx.actions[0].value === 'yes') {\n      ctx.reply('Great ! So happy for you !');\n    } else if (ctx.actions[0].value === 'no') {\n      ctx.reply('I hope it will improve !');\n    } else if (ctx.actions[0].value === 'yes-ephemeral') {\n      ctx.replyEphemeral('Great ! So happy for you !');\n    } else if (ctx.actions[0].value === 'no-ephemeral') {\n      ctx.replyEphemeral('I hope it will improve !');\n    } else if (ctx.actions[0].value === 'yes-replace') {\n      ctx.reply('Great ! So happy for you !', { replace: true });\n    } else if (ctx.actions[0].value === 'no-replace') {\n      ctx.reply('I hope it will improve !', { replace: true });\n    } else {\n      ctx.reply('Error.');\n    }\n  });\n};\n"]}