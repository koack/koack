{"version":3,"sources":["../../../src/bot/context/createContextFromEvent.js"],"names":["EventContextType","ContextType","extractIdFromEvent","key","event","id","extrackUserIdFromEvent","extrackChannelIdFromEvent","botContext","ctx","Object","create","assign","userId","channelId","logger","context","text"],"mappings":"AAAA,SAAcA,qCAAd,EAAgCC,2BAAhC,QAAmD,UAAnD;;;;;AAEA,MAAMC,qBAAsBC,GAAD;AAAA,iBAAI,UAAJ;;AAAA;AAAA,SACxBC,KAAD,IAAmB;AAAA,qBAAb,UAAa;;AAAA;;AACjB,QAAI,OAAOA,MAAMD,GAAN,CAAP,KAAsB,QAA1B,EAAoC;AAClC,aAAOC,MAAMD,GAAN,CAAP;AACD;AACD,QAAI,OAAOC,MAAMD,GAAN,CAAP,KAAsB,QAA1B,EAAoC;AAClC,aAAOC,MAAMD,GAAN,EAAWE,EAAlB;AACD;;AAED,WAAO,IAAP;AACD,GAVwB;AAAA,CAA3B;;AAaA,MAAMC,yBAAyBJ,mBAAmB,MAAnB,CAA/B;AACA,MAAMK,4BAA4BL,mBAAmB,SAAnB,CAAlC;;AAEA,gBAAe,gCAACM,UAAD,EAA0BJ,KAA1B,EAA8D;AAAA,wBAAnD,kBAAmD;;AAAA,oBAA/B,UAA+B;;AAAA,+BAApB,uBAAoB;;AAAA;AAAA;;AAC3E,QAAMK,MAAMC,OAAOC,MAAP,CAAcH,UAAd,CAAZ;;AAEA,4BAAOE,OAAOE,MAAP,CAAcH,GAAd,EAAmB;AACxBL,SADwB;AAExBS,YAAQP,uBAAuBF,KAAvB,CAFgB;AAGxBU,eAAWP,0BAA0BH,KAA1B,CAHa;AAIxBW,YAAQN,IAAIM,MAAJ,CAAWC,OAAX,CAAmB,EAAEC,MAAMb,MAAMa,IAAd,EAAnB;AAJgB,GAAnB,CAAP;AAMD,CATD","file":"createContextFromEvent.js","sourcesContent":["import type { EventContextType, ContextType } from '../types';\n\nconst extractIdFromEvent = (key: string) => (\n  (event: Object) => {\n    if (typeof event[key] === 'string') {\n      return event[key];\n    }\n    if (typeof event[key] === 'object') {\n      return event[key].id;\n    }\n\n    return null;\n  }\n);\n\nconst extrackUserIdFromEvent = extractIdFromEvent('user');\nconst extrackChannelIdFromEvent = extractIdFromEvent('channel');\n\nexport default (botContext: ContextType, event: Object): EventContextType => {\n  const ctx = Object.create(botContext);\n\n  return Object.assign(ctx, {\n    event,\n    userId: extrackUserIdFromEvent(event),\n    channelId: extrackChannelIdFromEvent(event),\n    logger: ctx.logger.context({ text: event.text }),\n  });\n};\n"]}