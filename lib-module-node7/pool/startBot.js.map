{"version":3,"sources":["../../src/pool/startBot.js"],"names":["Logger","Process","logger","startBot","pool","team","info","teamsToProcess","has","id","warn","get","replaceTeam","process","processes","canAddTeam","startTeam","newProcess","add","newProcessListSize","size","start"],"mappings":"AACA,OAAOA,MAAP;AACA,OAAOC,OAAP,MAAoB,WAApB;;;AAIA,MAAMC,SAAS,IAAIF,MAAJ,CAAW,YAAX,CAAf;;AAEA,eAAe,SAASG,QAAT,CAAkBC,IAAlB,EAA8BC,IAA9B,EAAoD;AACjEH,SAAOI,IAAP,CAAY,cAAZ,EAA4BD,IAA5B;;AAEA,MAAID,KAAKG,cAAL,CAAoBC,GAApB,CAAwBH,KAAKI,EAA7B,CAAJ,EAAsC;AACpCP,WAAOQ,IAAP,CAAY,qBAAZ,EAAmCL,IAAnC;AACAD,SAAKG,cAAL,CAAoBI,GAApB,CAAwBN,KAAKI,EAA7B,EAAiCG,WAAjC,CAA6CP,IAA7C;AACA;AACD;;AAED;AACA,OAAK,IAAIQ,OAAT,IAAoBT,KAAKU,SAAzB,EAAoC;AAClC,QAAID,QAAQE,UAAR,EAAJ,EAA0B;AACxBF,cAAQG,SAAR,CAAkBX,IAAlB;AACA;AACD;AACF;;AAED,QAAMY,aAAa,IAAIhB,OAAJ,CAAYG,IAAZ,CAAnB;AACAA,OAAKU,SAAL,CAAeI,GAAf,CAAmBD,UAAnB;AACAf,SAAOI,IAAP,CAAY,oBAAZ,EAAkC,EAAEa,oBAAoBf,KAAKU,SAAL,CAAeM,IAArC,EAAlC;AACAH,aAAWI,KAAX;AACAJ,aAAWD,SAAX,CAAqBX,IAArB;AACD","file":"startBot.js","sourcesContent":["/* @flow */\nimport Logger from 'nightingale/src';\nimport Process from './Process';\nimport Pool from './index';\nimport type { TeamType } from '../types';\n\nconst logger = new Logger('koack:pool');\n\nexport default function startBot(pool: Pool, team: TeamType): void {\n  logger.info('starting bot', team);\n\n  if (pool.teamsToProcess.has(team.id)) {\n    logger.warn('bot already started', team);\n    pool.teamsToProcess.get(team.id).replaceTeam(team);\n    return;\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (let process of pool.processes) {\n    if (process.canAddTeam()) {\n      process.startTeam(team);\n      return;\n    }\n  }\n\n  const newProcess = new Process(pool);\n  pool.processes.add(newProcess);\n  logger.info('adding new process', { newProcessListSize: pool.processes.size });\n  newProcess.start();\n  newProcess.startTeam(team);\n}\n"]}