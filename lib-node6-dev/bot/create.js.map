{"version":3,"sources":["../../src/bot/create.js"],"names":["createBot","team","rtm","token","logLevel","autoReconnect","autoMark","dataStore","webClient","installerUsersWebClients","installerUsers","Map","map","user","slackId","start"],"mappings":";;;;;kBAIwBA,S;;;;;;AAJxB;;AACA;;;;AACA;;;;AAEe,SAASA,SAAT,CAAmBC,IAAnB,EAAmC;AAAA,UAAhBA,IAAgB;;AAChD,QAAMC,MAAM,sBAAcD,KAAKE,KAAnB,EAA0B;AACpCC,cAAiC,MADG;AAEpCC,mBAAe,IAFqB;AAGpCC,cAAU,IAH0B;AAIpCC,eAAW;AAJyB,GAA1B,CAAZ;;AAOA,QAAMC,YAAY,sBAAcP,KAAKE,KAAnB,CAAlB;;AAEA,QAAMM,2BAA2B,CAACR,KAAKS,cAAN,GAAuB,IAAvB,GAA8B,IAAIC,GAAJ,CAC7DV,KAAKS,cAAL,CAAoBE,GAApB,CAAwBC,QAAQ,CAACA,KAAKC,OAAN,EAAe,sBAAcD,KAAKV,KAAnB,CAAf,CAAhC,CAD6D,CAA/D;;AAIAD,MAAIa,KAAJ;;AAEA,SAAO,kBAAQ,EAAEd,IAAF,EAAQC,GAAR,EAAaM,SAAb,EAAwBC,wBAAxB,EAAR,CAAP;AACD","file":"create.js","sourcesContent":["import { RtmClient, WebClient, MemoryDataStore } from '@slack/client';\nimport Bot from './Bot';\nimport type { TeamType } from '../types/';\n\nexport default function createBot(team: TeamType) {\n  const rtm = new RtmClient(team.token, {\n    logLevel: PRODUCTION ? 'error' : 'info',\n    autoReconnect: true,\n    autoMark: true,\n    dataStore: new MemoryDataStore(),\n  });\n\n  const webClient = new WebClient(team.token);\n\n  const installerUsersWebClients = !team.installerUsers ? null : new Map(\n    team.installerUsers.map(user => [user.slackId, new WebClient(user.token)]),\n  );\n\n  rtm.start();\n\n  return new Bot({ team, rtm, webClient, installerUsersWebClients });\n}\n"]}