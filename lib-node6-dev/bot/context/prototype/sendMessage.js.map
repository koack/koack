{"version":3,"sources":["../../../../src/bot/context/prototype/sendMessage.js"],"names":["ParseType","AuthorType","name","link","icon","AttachmentFieldType","title","value","short","AttachmentType","fallback","color","pretext","author","titleLink","text","fields","imageUrl","thumbUrl","footer","footerIcon","SendMessageOptionsType","parse","linkNames","attachments","unfurlLinks","unfurlMedia","username","asUser","iconUrl","iconEmoj","threadTs","replyBroadcast","transformAttachment","attachment","author_name","author_link","author_icon","title_link","image_url","thumb_url","footer_icon","ctx","channelId","message","options","rtm","sendMessage","webClient","chat","postMessage","link_names","map","unfurl_links","unfurl_media","as_user","icon_url","icon_emoji","thread_ts","reply_broadcast"],"mappings":";;;;;;;;;;;;;AAAA;MACKA,S;;MAEAC,U;AACHC,M;AACAC,M;AACAC,M;;;;;;MAGGC,mB;AACHC,O;AACAC,O;AACAC,O;;;;;;MAGGC,c;AACHC,U;AACAC,O;AACAC,S;AACAC,Q,8BAASZ,U;AACTK,O;AACAQ,W;AACAC,M;AACAC,Q,yDAAeX,mB;AACfY,U;AACAC,U;AACAC,Q;AACAC,Y;;;;;;MAGUC,sB,WAAAA,sB;AACVC,O,8BAAQtB,S;AACRuB,W;AACAC,a,yDAAoBf,c;AACpBgB,a;AACAC,a;AACAC,U;AACAC,Q;AACAC,S;AACAC,U;AACAC,U;AACAC,gB;;;;;;AAGF,MAAMC,sBAAuBC,UAAD;AAAA,UAACA,UAAD,EAAazB,cAAb;;AAAA,SAAiC;AAC3DC,cAAUwB,WAAWxB,QADsC;AAE3DC,WAAOuB,WAAWvB,KAFyC;AAG3DC,aAASsB,WAAWtB,OAHuC;AAI3DuB,iBAAaD,WAAWrB,MAAX,IAAqBqB,WAAWrB,MAAX,CAAkBX,IAJO;AAK3DkC,iBAAaF,WAAWrB,MAAX,IAAqBqB,WAAWrB,MAAX,CAAkBV,IALO;AAM3DkC,iBAAaH,WAAWrB,MAAX,IAAqBqB,WAAWrB,MAAX,CAAkBT,IANO;AAO3DE,WAAO4B,WAAW5B,KAPyC;AAQ3DgC,gBAAYJ,WAAWpB,SARoC;AAS3DE,YAAQkB,WAAWlB,MATwC;AAU3DuB,eAAWL,WAAWjB,QAVqC;AAW3DuB,eAAWN,WAAWhB,QAXqC;AAY3DC,YAAQe,WAAWf,MAZwC;AAa3DsB,iBAAaP,WAAWd;AAbmC,GAAjC;AAAA,CAA5B;;kBAgBe,qBAACsB,GAAD,EAAMC,SAAN,EAAyBC,OAAzB,EAA0CC,OAA1C,EAA+E;AAAA,UAAzEF,SAAyE;;AAAA,UAAtDC,OAAsD;;AAAA,UAArCC,OAAqC,8BAA3BxB,sBAA2B;;AAC5F,MAAI,CAACwB,OAAL,EAAc;AACZ,WAAOH,IAAII,GAAJ,CAAQC,WAAR,CAAoBH,OAApB,EAA6BD,SAA7B,CAAP;AACD;;AAED,SAAOD,IAAIM,SAAJ,CAAcC,IAAd,CAAmBC,WAAnB,CAA+BP,SAA/B,EAA0CC,OAA1C,EAAmD;AACxDtB,WAAOuB,QAAQvB,KADyC;AAExD6B,gBAAYN,QAAQtB,SAFoC;AAGxDC,iBAAaqB,QAAQrB,WAAR,CAAoB4B,GAApB,CAAwBnB,mBAAxB,CAH2C;AAIxDoB,kBAAcR,QAAQpB,WAJkC;AAKxD6B,kBAAcT,QAAQnB,WALkC;AAMxDC,cAAUkB,QAAQlB,QANsC;AAOxD4B,aAASV,QAAQjB,MAPuC;AAQxD4B,cAAUX,QAAQhB,OARsC;AASxD4B,gBAAYZ,QAAQf,QAToC;AAUxD4B,eAAWb,QAAQd,QAVqC;AAWxD4B,qBAAiBd,QAAQb;AAX+B,GAAnD,CAAP;AAaD,C","file":"sendMessage.js","sourcesContent":["/* eslint-disable camelcase */\ntype ParseType = 'none' | 'full';\n\ntype AuthorType = {|\n  name: ?string,\n  link: ?string,\n  icon: ?string,\n|};\n\ntype AttachmentFieldType = {|\n  title: string,\n  value: string,\n  short: ?boolean,\n|};\n\ntype AttachmentType = {|\n  fallback: string,\n  color: ?string,\n  pretext: ?string,\n  author: ?AuthorType,\n  title: ?string,\n  titleLink: ?string,\n  text: string,\n  fields: ?Array<AttachmentFieldType>,\n  imageUrl: ?string,\n  thumbUrl: ?string,\n  footer: ?string,\n  footerIcon: ?string,\n|};\n\nexport type SendMessageOptionsType = {|\n  parse: ?ParseType,\n  linkNames: ?boolean,\n  attachments: ?Array<AttachmentType>,\n  unfurlLinks: ?boolean,\n  unfurlMedia: ?boolean,\n  username: ?string,\n  asUser: ?boolean,\n  iconUrl: ?boolean,\n  iconEmoj: ?boolean,\n  threadTs: ?string,\n  replyBroadcast: ?boolean,\n|};\n\nconst transformAttachment = (attachment: AttachmentType) => ({\n  fallback: attachment.fallback,\n  color: attachment.color,\n  pretext: attachment.pretext,\n  author_name: attachment.author && attachment.author.name,\n  author_link: attachment.author && attachment.author.link,\n  author_icon: attachment.author && attachment.author.icon,\n  title: attachment.title,\n  title_link: attachment.titleLink,\n  fields: attachment.fields,\n  image_url: attachment.imageUrl,\n  thumb_url: attachment.thumbUrl,\n  footer: attachment.footer,\n  footer_icon: attachment.footerIcon,\n});\n\nexport default (ctx, channelId: string, message: string, options: ?SendMessageOptionsType) => {\n  if (!options) {\n    return ctx.rtm.sendMessage(message, channelId);\n  }\n\n  return ctx.webClient.chat.postMessage(channelId, message, {\n    parse: options.parse,\n    link_names: options.linkNames,\n    attachments: options.attachments.map(transformAttachment),\n    unfurl_links: options.unfurlLinks,\n    unfurl_media: options.unfurlMedia,\n    username: options.username,\n    as_user: options.asUser,\n    icon_url: options.iconUrl,\n    icon_emoji: options.iconEmoj,\n    thread_ts: options.threadTs,\n    reply_broadcast: options.replyBroadcast,\n  });\n};\n"]}